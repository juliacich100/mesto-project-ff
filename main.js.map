{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/scripts/api.js","webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/scripts/validation.js","webpack://mesto-project-ff/./src/scripts/index.js"],"sourcesContent":["\r\nexport const authConfig = {\r\n    baseUrl: 'https://nomoreparties.co/v1/wff-cohort-24',\r\n    headers: {\r\n    authorization: 'c310e6ce-4a92-441b-8e12-437db4f00de4',\r\n    'Content-Type': 'application/json'\r\n    }\r\n}\r\n\r\nconst handleResponse = (res) => {\r\n    if(res.ok) {\r\n        return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`)\r\n} \r\n\r\nexport const getInitialCards = () => {\r\n    return fetch(`${authConfig.baseUrl}/cards`, {headers: authConfig.headers})\r\n    .then(handleResponse);\r\n}\r\n\r\nexport const getUserInfo = () => {\r\n    return fetch(`${authConfig.baseUrl}/users/me`, {headers: authConfig.headers})\r\n    .then(handleResponse);\r\n}\r\n\r\nexport const editUserInfo = (userName, userDesc) => {\r\n    return fetch(`${authConfig.baseUrl}/users/me`, {\r\n        method: 'PATCH',\r\n        headers: authConfig.headers, \r\n        body: JSON.stringify({\r\n            name: userName,\r\n            about: userDesc\r\n        })\r\n    })\r\n    .then(handleResponse);\r\n}\r\n\r\nexport const addNewCard = (cardName, cardLink) => {\r\n    return fetch(`${authConfig.baseUrl}/cards`, {\r\n        method: 'POST',\r\n        headers: authConfig.headers,\r\n        body: JSON.stringify({\r\n            name: cardName,\r\n            link: cardLink\r\n        })\r\n    })\r\n    .then(handleResponse);\r\n}\r\n\r\nexport const deleteCard = (cardId) => {\r\n    return fetch(`${authConfig.baseUrl}/cards/${cardId}`, {\r\n        method: 'DELETE',\r\n        headers: authConfig.headers,\r\n    })\r\n    .then(handleResponse);\r\n}\r\n\r\nexport const editAvatar = (avatar) => {\r\n    return fetch(`${authConfig.baseUrl}/users/me/avatar`, {\r\n        method: 'PATCH',\r\n        headers: authConfig.headers,\r\n        body: JSON.stringify({\r\n            avatar: avatar,\r\n        })\r\n    })\r\n    .then(handleResponse);\r\n}\r\n\r\nexport const addCardLike = (cardId) => {\r\n    return fetch(`${authConfig.baseUrl}/cards/likes/${cardId}`, {\r\n        method: 'PUT',\r\n        headers: authConfig.headers\r\n    })\r\n    .then(handleResponse);\r\n}\r\n\r\nexport const deleteCardLike = (cardId) => {\r\n    return fetch(`${authConfig.baseUrl}/cards/likes/${cardId}`, {\r\n        method: 'DELETE',\r\n        headers: authConfig.headers\r\n    })\r\n    .then(handleResponse);\r\n}\r\n\r\n","export {createCard, handleDelete, pressLikeButton}\r\nimport { deleteCard, addCardLike, deleteCardLike} from \"../scripts/api\";\r\n\r\nconst cardTemplate = document.querySelector('#card-template').content;\r\n\r\n// Функция создания карточки\r\nfunction createCard(cardData, handleDelete, pressLikeButton, zoomImg, userId) {\r\n    const cardElement = cardTemplate.querySelector('.places__item').cloneNode(true);\r\n    const cardImage = cardElement.querySelector('.card__image');\r\n    const cardLikeButton = cardElement.querySelector('.card__like-button');\r\n    const likesCounter = cardElement.querySelector('.card__like-button-count');\r\n    const cardDeleteButton = cardElement.querySelector('.card__delete-button');\r\n\r\n    cardImage.src = cardData.link;\r\n    cardImage.alt = cardData.name;\r\n    cardElement.querySelector('.card__title').textContent = cardData.name;\r\n    likesCounter.textContent = cardData.likes.length;\r\n    if(cardData.owner._id != userId) {\r\n        cardDeleteButton.classList.add('card__delete-button-hidden');\r\n    } else {\r\n        cardDeleteButton.addEventListener('click', () => {\r\n            deleteCard(cardData._id).then(() => handleDelete(cardElement))});\r\n    }\r\n    if(hasUserLikes(cardData.likes, userId)) {\r\n        cardLikeButton.classList.add('card__like-button_is-active');\r\n    };\r\n\r\n    cardLikeButton.addEventListener('click', (evt) => {\r\n        updateLikesNumber(evt, cardData._id).then((result) => {\r\n            likesCounter.textContent = result.likes.length;\r\n            pressLikeButton(evt);\r\n        }).catch((err) => {console.log(err)});     \r\n    });\r\n    cardImage.addEventListener('click', (evt) => zoomImg(evt, cardElement));\r\n\r\n    return cardElement;\r\n}\r\n\r\n// Функция удаления карточки\r\nconst handleDelete = (cardElement) => {\r\n    cardElement.remove();\r\n}\r\n\r\n// функция, обрабатывающая событие лайка\r\nfunction pressLikeButton(evt) {\r\n    if (evt.target.classList.contains('card__like-button')) {\r\n        evt.target.classList.toggle('card__like-button_is-active');\r\n    }\r\n}\r\n\r\nfunction hasUserLikes(cardLikes, userId) {\r\n    const likesList = Array.from(cardLikes);\r\n    return likesList.some((like) => {\r\n        return like._id === userId;\r\n      })\r\n}\r\n\r\nconst updateLikesNumber = (evt, cardId) => {\r\n    return evt.target.classList.contains('card__like-button_is-active') ? deleteCardLike(cardId) : addCardLike(cardId);\r\n}\r\n","export {openModal, closeModal, closeModalOverlay}\r\n\r\nfunction openModal(modal) {\r\n    modal.classList.add('popup_is-animated', 'popup_is-opened');\r\n    document.addEventListener('keydown', closeModalEsc);\r\n}\r\n\r\nfunction closeModal(popup) {\r\n    popup.classList.remove('popup_is-opened');\r\n    document.removeEventListener('keydown', closeModalEsc);\r\n}\r\n\r\nfunction closeModalEsc (evt) {\r\n    if (evt.key === \"Escape\") {\r\n        const openedPopup = document.querySelector('.popup_is-opened');\r\n        closeModal(openedPopup);\r\n    }\r\n}\r\n\r\nfunction closeModalOverlay (evt) {\r\n    if (evt.currentTarget === evt.target) {\r\n        const openedPopup = document.querySelector('.popup_is-opened');\r\n        closeModal(openedPopup);\r\n      }\r\n}"," // Функция, которая добавляет класс с ошибкой\r\n const showInputError = (formElement, formInput, validationConfig) => {\r\n    const inputError = formElement.querySelector(`.${formInput.id}-error`);\r\n    inputError.classList.add(validationConfig.errorClass);\r\n    inputError.textContent = formInput.validationMessage;\r\n}\r\n\r\n// Функция, которая удаляет класс с ошибкой\r\nconst hideInputError = (formElement, formInput, validationConfig) => {\r\n    const inputError = formElement.querySelector(`.${formInput.id}-error`);\r\n    inputError.classList.remove(validationConfig.errorClass);\r\n    inputError.textContent = '';\r\n}\r\n\r\n// Функция, которая проверяет валидность поля\r\nconst isValid = (formElement, formInput, validationConfig) => {\r\n    if(formInput.validity.patternMismatch) {\r\n        formInput.setCustomValidity(formInput.dataset.errorText);\r\n    } else {\r\n        formInput.setCustomValidity(\"\");\r\n    }\r\n    if(!formInput.validity.valid) {\r\n        showInputError(formElement, formInput, validationConfig);\r\n    } else {\r\n        hideInputError(formElement, formInput, validationConfig);\r\n    }\r\n}\r\n\r\nconst hasInvalidInput = (formElement, validationConfig) => {\r\n    const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\r\n    return inputList.some((inputElement) => {\r\n      return !inputElement.validity.valid;\r\n    })\r\n  }\r\n\r\nconst toggleButton = (formElement, validationConfig) => {\r\n    const buttonElement= formElement.querySelector(validationConfig.submitButtonSelector);\r\n    if(hasInvalidInput(formElement, validationConfig)) {\r\n        buttonElement.disabled = true;\r\n        buttonElement.classList.add(validationConfig.inactiveButtonClass);\r\n      } else {\r\n        buttonElement.disabled = false;\r\n        buttonElement.classList.remove(validationConfig.inactiveButtonClass);\r\n      }\r\n}\r\n\r\nexport function clearValidation(formElement, validationConfig) {\r\n    const buttonElement= formElement.querySelector(validationConfig.submitButtonSelector);\r\n    const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\r\n    inputList.forEach((formInput) => {\r\n        hideInputError(formElement, formInput, validationConfig)\r\n    })\r\n    buttonElement.disabled = true;\r\n    buttonElement.classList.add(validationConfig.inactiveButtonClass);\r\n}\r\n\r\nconst setEventListeners = (formElement, validationConfig) => {\r\n    const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\r\n    toggleButton(formElement, validationConfig);\r\n    inputList.forEach((inputElement) => {\r\n        inputElement.addEventListener('input', () => {\r\n            isValid(formElement, inputElement, validationConfig);\r\n            toggleButton(formElement, validationConfig);\r\n        })\r\n    })\r\n}\r\n\r\nexport const enableValidation = (validationConfig) => {\r\n    const formList = Array.from(document.querySelectorAll(validationConfig.formSelector));\r\n    formList.forEach((formElement) => {\r\n        setEventListeners(formElement, validationConfig);\r\n    })\r\n}\r\n","import \"../pages/index.css\"\r\nimport { createCard, handleDelete, pressLikeButton} from \"../components/card.js\";\r\nimport { openModal, closeModal, closeModalOverlay } from \"../components/modal.js\";\r\nimport { clearValidation, enableValidation } from \"./validation.js\";\r\nimport { getInitialCards, getUserInfo, editUserInfo, addNewCard, editAvatar } from \"./api.js\";\r\n\r\n// DOM узлы\r\nconst placesList = document.querySelector('.places__list');\r\nconst popupEditProfile = document.querySelector('.popup_type_edit');\r\nconst popupEditAvatar = document.querySelector('.popup_avatar_edit');\r\nconst formEditAvatar = popupEditAvatar.querySelector('.popup__form');\r\nconst avatarLinkInput = formEditAvatar.querySelector('.popup__input_type_avatar');\r\nconst profileImg = document.querySelector('.profile__image');\r\nconst buttonOpenPopupEditProfile = document.querySelector('.profile__edit-button');\r\nconst popupAddCard = document.querySelector('.popup_type_new-card');\r\nconst buttonOpenPopupAddCard = document.querySelector('.profile__add-button');\r\nconst imagePopup = document.querySelector('.popup_type_image');\r\nconst imagePopupPic = imagePopup.querySelector('.popup__image');\r\nconst imagePopupDesc = imagePopup.querySelector('.popup__caption');\r\nconst newCardForm = popupAddCard.querySelector('.popup__form');\r\nconst placeInput = newCardForm.querySelector('.popup__input_type_card-name');\r\nconst linkInput = newCardForm.querySelector('.popup__input_type_url');\r\nconst formEditProfile = popupEditProfile.querySelector('.popup__form');\r\nconst nameInput = formEditProfile.querySelector('.popup__input_type_name');\r\nconst jobInput = formEditProfile.querySelector('.popup__input_type_description');\r\nconst profileTitle = document.querySelector('.profile__title');\r\nconst profileDesc = document.querySelector('.profile__description');\r\nconst buttonClosePopupEditAvatar = popupEditAvatar.querySelector('.popup__close');\r\nconst buttonClosePopupEditProfile = popupEditProfile.querySelector('.popup__close');\r\nconst buttonClosePopupAddCard = popupAddCard.querySelector('.popup__close');\r\nconst buttonCloseImagePopup = imagePopup.querySelector('.popup__close');\r\nconst buttonSubmitPopupEditAvatar = popupEditAvatar.querySelector('.popup__button');\r\nconst buttonSubmitPopupEditProfile = popupEditProfile.querySelector('.popup__button');\r\nconst buttonSubmitPopupAddCard = popupAddCard.querySelector('.popup__button');\r\nconst validationConfig = {\r\n    formSelector: '.popup__form',\r\n    inputSelector: '.popup__input',\r\n    submitButtonSelector: '.popup__button',\r\n    inactiveButtonClass: 'button_inactive', \r\n    inputErrorClass: '.form-input-error',\r\n    errorClass: 'form__input-error_active', \r\n  };\r\n\r\n// функция открытия попапа с картинкой\r\nfunction zoomImg(evt, cardElement) {\r\n    imagePopupDesc.textContent = cardElement.querySelector('.card__title').textContent;\r\n    imagePopupPic.src = evt.target.src;\r\n    imagePopupPic.alt = evt.target.alt;\r\n    openModal(imagePopup);\r\n}\r\n\r\n// обработчики открытия и закрытия модальных окон\r\nprofileImg.addEventListener('click', function () {\r\n    formEditAvatar.reset();\r\n    clearValidation(formEditAvatar, validationConfig);\r\n    openModal(popupEditAvatar);\r\n})\r\n\r\nbuttonOpenPopupEditProfile.addEventListener('click', function () {\r\n    openModal(popupEditProfile);\r\n    clearValidation(formEditProfile, validationConfig);\r\n});\r\n\r\nbuttonOpenPopupAddCard.addEventListener('click', function() {\r\n    newCardForm.reset();\r\n    clearValidation(newCardForm, validationConfig);\r\n    openModal(popupAddCard);\r\n});\r\n\r\nbuttonClosePopupEditAvatar.addEventListener('click', () => closeModal(popupEditAvatar));\r\nbuttonClosePopupEditProfile.addEventListener('click', () => closeModal(popupEditProfile));\r\nbuttonClosePopupAddCard.addEventListener('click', () => closeModal(popupAddCard));\r\nbuttonCloseImagePopup.addEventListener('click', () => closeModal(imagePopup));\r\n\r\npopupEditAvatar.addEventListener(\"click\", closeModalOverlay);\r\npopupEditProfile.addEventListener(\"click\", closeModalOverlay);\r\npopupAddCard.addEventListener(\"click\", closeModalOverlay);\r\nimagePopup.addEventListener(\"click\", closeModalOverlay);\r\n\r\n// функция редактирования профиля\r\nfunction submitEditProfileForm(evt) {\r\n    evt.preventDefault();\r\n    renderLoading(true, buttonSubmitPopupEditProfile);\r\n    editUserInfo(nameInput.value, jobInput.value).then((result) => {\r\n        renderUserInfo(result.name, result.about, result.avatar)\r\n    })\r\n    .catch((err) => {\r\n        console.log(err);\r\n    })\r\n    .finally(() => {\r\n        renderLoading(false, buttonSubmitPopupEditProfile);\r\n        closeModal(popupEditProfile);\r\n    });\r\n}\r\n\r\nformEditProfile.addEventListener('submit', submitEditProfileForm);\r\n\r\n// функция добавления новой карточки\r\nfunction submitAddCardForm(evt) {\r\n    evt.preventDefault();\r\n     \r\n    renderLoading(true, buttonSubmitPopupAddCard);\r\n    addNewCard(placeInput.value, linkInput.value).then(res => {\r\n        placesList.prepend(createCard(res, handleDelete, pressLikeButton, zoomImg, res.owner._id));\r\n    })\r\n    .catch((err) => {\r\n        console.log(err);\r\n    })\r\n    .finally(() => {\r\n        renderLoading(false, buttonSubmitPopupAddCard);\r\n        closeModal(popupAddCard);\r\n        newCardForm.reset();\r\n    });\r\n}\r\n\r\nnewCardForm.addEventListener('submit', submitAddCardForm);\r\n\r\n//функция редактирования аватара\r\nfunction submitEditAvatarForm(evt) {\r\n    evt.preventDefault();\r\n    renderLoading(true, buttonSubmitPopupEditAvatar);\r\n    editAvatar(avatarLinkInput.value).then(res => {\r\n        renderUserInfo(res.name, res.about, res.avatar)\r\n   })\r\n   .catch((err) => {\r\n        console.log(err);\r\n    })\r\n    .finally(() => {\r\n        renderLoading(false, buttonSubmitPopupEditAvatar);\r\n        closeModal(popupEditAvatar);\r\n    });\r\n}\r\n\r\nformEditAvatar.addEventListener('submit', submitEditAvatarForm);\r\n\r\nfunction renderInitialCards(data, userId) { \r\n    data.forEach((item) => { \r\n        placesList.append(createCard(item, handleDelete, pressLikeButton, zoomImg, userId));\r\n    })\r\n}\r\n\r\nPromise.all([getUserInfo(), getInitialCards()]).then(([userData, cards]) => {\r\n    renderInitialCards(cards, userData._id);\r\n    renderUserInfo(userData.name, userData.about, userData.avatar);\r\n})\r\n\r\nfunction renderUserInfo(userName, userDesc, userAvatar) {\r\n    profileTitle.textContent = userName;\r\n    profileDesc.textContent = userDesc;\r\n    profileImg.style.backgroundImage = `url(${userAvatar})`;\r\n    nameInput.value = userName; \r\n    jobInput.value = userDesc;\r\n}\r\n\r\nfunction renderLoading(isLoading, submitButton) {\r\n    submitButton.textContent = isLoading ? 'Сохранение...' : 'Сохранить';\r\n}\r\n\r\nenableValidation(validationConfig);\r\n"],"names":["authConfig","baseUrl","headers","authorization","handleResponse","res","ok","json","Promise","reject","concat","status","cardTemplate","document","querySelector","content","createCard","cardData","handleDelete","pressLikeButton","zoomImg","userId","cardElement","cloneNode","cardImage","cardLikeButton","likesCounter","cardDeleteButton","src","link","alt","name","textContent","likes","length","owner","_id","classList","add","addEventListener","cardId","fetch","method","then","cardLikes","Array","from","some","like","hasUserLikes","evt","updateLikesNumber","result","catch","err","console","log","remove","target","contains","toggle","deleteCardLike","addCardLike","openModal","modal","closeModalEsc","closeModal","popup","removeEventListener","key","closeModalOverlay","currentTarget","hideInputError","formElement","formInput","validationConfig","inputError","id","errorClass","toggleButton","buttonElement","submitButtonSelector","querySelectorAll","inputSelector","inputElement","validity","valid","hasInvalidInput","disabled","inactiveButtonClass","clearValidation","forEach","placesList","popupEditProfile","popupEditAvatar","formEditAvatar","avatarLinkInput","profileImg","buttonOpenPopupEditProfile","popupAddCard","buttonOpenPopupAddCard","imagePopup","imagePopupPic","imagePopupDesc","newCardForm","placeInput","linkInput","formEditProfile","nameInput","jobInput","profileTitle","profileDesc","buttonClosePopupEditAvatar","buttonClosePopupEditProfile","buttonClosePopupAddCard","buttonCloseImagePopup","buttonSubmitPopupEditAvatar","buttonSubmitPopupEditProfile","buttonSubmitPopupAddCard","formSelector","inputErrorClass","renderUserInfo","userName","userDesc","userAvatar","style","backgroundImage","value","renderLoading","isLoading","submitButton","reset","preventDefault","body","JSON","stringify","about","avatar","finally","cardName","cardLink","prepend","all","_ref","data","_ref2","userData","item","append","inputList","patternMismatch","setCustomValidity","dataset","errorText","validationMessage","showInputError","isValid","setEventListeners","enableValidation"],"sourceRoot":""}