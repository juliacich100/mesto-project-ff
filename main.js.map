{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/scripts/api.js","webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/scripts/validation.js","webpack://mesto-project-ff/./src/scripts/index.js"],"sourcesContent":["\r\nexport const authConfig = {\r\n    baseUrl: 'https://nomoreparties.co/v1/wff-cohort-24',\r\n    headers: {\r\n    authorization: 'c310e6ce-4a92-441b-8e12-437db4f00de4',\r\n    'Content-Type': 'application/json'\r\n    }\r\n}\r\n\r\nexport const getInitialCards = () => {\r\n    return fetch(`${authConfig.baseUrl}/cards`, {headers: authConfig.headers})\r\n    .then(res => {\r\n        if(res.ok) {\r\n            return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n    })\r\n}\r\n\r\nexport const getUserInfo = () => {\r\n    return fetch(`${authConfig.baseUrl}/users/me`, {headers: authConfig.headers})\r\n    .then(res => {\r\n        if(res.ok) {\r\n            return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n    })\r\n}\r\n\r\nexport const editUserInfo = (userName, userDesc) => {\r\n    return fetch(`${authConfig.baseUrl}/users/me`, {\r\n        method: 'PATCH',\r\n        headers: authConfig.headers, \r\n        body: JSON.stringify({\r\n            name: userName,\r\n            about: userDesc\r\n        })\r\n    })\r\n    .then(res => {\r\n        if(res.ok) {\r\n            return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n    })\r\n}\r\n\r\nexport const addNewCard = (cardName, cardLink) => {\r\n    return fetch(`${authConfig.baseUrl}/cards`, {\r\n        method: 'POST',\r\n        headers: authConfig.headers,\r\n        body: JSON.stringify({\r\n            name: cardName,\r\n            link: cardLink\r\n        })\r\n    })\r\n    .then(res => {\r\n        if(res.ok) {\r\n            return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n    })\r\n}\r\n\r\nexport const deleteCard = (cardId) => {\r\n    return fetch(`${authConfig.baseUrl}/cards/${cardId}`, {\r\n        method: 'DELETE',\r\n        headers: authConfig.headers,\r\n    })\r\n    .then(res => {\r\n        if(res.ok) {\r\n            return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n    })\r\n}\r\n\r\nexport const editAvatar = (avatar) => {\r\n    return fetch(`${authConfig.baseUrl}/users/me/avatar`, {\r\n        method: 'PATCH',\r\n        headers: authConfig.headers,\r\n        body: JSON.stringify({\r\n            avatar: avatar,\r\n        })\r\n    })\r\n    .then(res => {\r\n        if(res.ok) {\r\n            return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n    })\r\n}\r\n\r\nexport const addCardLike = (cardId, likesCounter) => {\r\n    return fetch(`${authConfig.baseUrl}/cards/likes/${cardId}`, {\r\n        method: 'PUT',\r\n        headers: authConfig.headers\r\n    })\r\n    .then(res => {\r\n        if(res.ok) {\r\n            return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n    })\r\n}\r\n\r\nexport const deleteCardLike = (cardId, likesCounter) => {\r\n    return fetch(`${authConfig.baseUrl}/cards/likes/${cardId}`, {\r\n        method: 'DELETE',\r\n        headers: authConfig.headers\r\n    })\r\n    .then(res => {\r\n        if(res.ok) {\r\n            return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n    })\r\n}\r\n\r\n","export {createCard, handleDelete, pressLikeButton}\r\nimport { deleteCard, addCardLike, deleteCardLike} from \"../scripts/api\";\r\n\r\nconst cardTemplate = document.querySelector('#card-template').content;\r\n\r\n// Функция создания карточки\r\nfunction createCard(cardData, handleDelete, pressLikeButton, zoomImg, user) {\r\n    const cardElement = cardTemplate.querySelector('.places__item').cloneNode(true);\r\n    const cardImage = cardElement.querySelector('.card__image');\r\n    const cardLikeButton = cardElement.querySelector('.card__like-button');\r\n    const likesCounter = cardElement.querySelector('.card__like-button-count');\r\n    const cardDeleteButton = cardElement.querySelector('.card__delete-button');\r\n\r\n    cardImage.src = cardData.link;\r\n    cardImage.alt = cardData.name;\r\n    cardElement.querySelector('.card__title').textContent = cardData.name;\r\n    likesCounter.textContent = cardData.likes.length;\r\n    if(cardData.owner._id != user) {\r\n        cardDeleteButton.classList.add('card__delete-button-hidden');\r\n    }\r\n\r\n    cardDeleteButton.addEventListener('click', () => {\r\n        deleteCard(cardData._id).then(res => {handleDelete(cardElement)})});\r\n    cardLikeButton.addEventListener('click', (evt) => {\r\n        pressLikeButton(evt);\r\n        updateLikesNumber(evt, cardData._id, likesCounter);     \r\n    });\r\n    cardImage.addEventListener('click', (evt) => zoomImg(evt, cardElement));\r\n\r\n    return cardElement;\r\n}\r\n\r\n// Функция удаления карточки\r\nconst handleDelete = (cardElement) => {\r\n    cardElement.remove();\r\n}\r\n\r\n// функция, обрабатывающая событие лайка\r\nfunction pressLikeButton(evt) {\r\n    if (evt.target.classList.contains('card__like-button')) {\r\n        evt.target.classList.toggle('card__like-button_is-active');\r\n    }\r\n}\r\n\r\nfunction updateLikesNumber(evt, cardId, likesCounter) {\r\n    if (evt.target.classList.contains('card__like-button_is-active')) {\r\n        addCardLike(cardId, likesCounter).then((result) => {           \r\n                likesCounter.textContent = result.likes.length;\r\n                }).catch((err) => {console.log(err)});\r\n    } else {\r\n        deleteCardLike(cardId, likesCounter).then((result) => {\r\n                    likesCounter.textContent = result.likes.length;\r\n               }).catch((err) => {console.log(err)});\r\n    }\r\n}\r\n","export {openModal, closeModal, closeModalOverlay}\r\n\r\nfunction openModal(modal) {\r\n    modal.classList.add('popup_is-animated', 'popup_is-opened');\r\n    document.addEventListener('keydown', closeModalEsc);\r\n}\r\n\r\nfunction closeModal(popup) {\r\n    popup.classList.remove('popup_is-opened');\r\n    document.removeEventListener('keydown', closeModalEsc);\r\n}\r\n\r\nfunction closeModalEsc (evt) {\r\n    if (evt.key === \"Escape\") {\r\n        const openedPopup = document.querySelector('.popup_is-opened');\r\n        closeModal(openedPopup);\r\n    }\r\n}\r\n\r\nfunction closeModalOverlay (evt) {\r\n    if (evt.currentTarget === evt.target) {\r\n        const openedPopup = document.querySelector('.popup_is-opened');\r\n        closeModal(openedPopup);\r\n      }\r\n}","// Функция, которая добавляет класс с ошибкой\r\nconst showInputError = (formElement, formInput, errorMessage) => {\r\n    const formError = formElement.querySelector(`.${formInput.id}-error`);\r\n    formError.textContent = errorMessage;\r\n    formError.classList.add('form__input-error_active');\r\n}\r\n\r\n// Функция, которая удаляет класс с ошибкой\r\nconst hideInputError = (formElement, formInput) => {\r\n    const formError = formElement.querySelector(`.${formInput.id}-error`);\r\n    formError.classList.remove('form__input-error_active');\r\n    formError.textContent = '';\r\n}\r\n\r\n// Функция, которая проверяет валидность поля\r\nconst isValid = (formElement, formInput) => {\r\n    if(formInput.validity.patternMismatch) {\r\n        formInput.setCustomValidity(\"Разрешены только латинские, кириллические буквы, знаки дефиса и пробелы\")\r\n    } else {\r\n        formInput.setCustomValidity(\"\")\r\n    }\r\n    if(!formInput.validity.valid) {\r\n        showInputError(formElement, formInput, formInput.validationMessage);\r\n    } else {\r\n        hideInputError(formElement, formInput);\r\n    }\r\n}\r\n\r\nconst hasInvalidInput = (formElement) => {\r\n    const inputList = Array.from(formElement.querySelectorAll('.popup__input'));\r\n    return inputList.some((inputElement) => {\r\n      return !inputElement.validity.valid;\r\n    })\r\n  }\r\n\r\nconst toggleButton = (formElement) => {\r\n    const buttonElement= formElement.querySelector('.popup__button');\r\n    if(hasInvalidInput(formElement)) {\r\n        buttonElement.disabled = true;\r\n        buttonElement.classList.add('button_inactive');\r\n      } else {\r\n        buttonElement.disabled = false;\r\n        buttonElement.classList.remove('button_inactive');\r\n      }\r\n}\r\n\r\nexport function clearValidation(formElement) {\r\n    const errorList = Array.from(formElement.querySelectorAll('.form-input-error'));\r\n    errorList.forEach((error) => {\r\n        error.classList.remove('form__input-error_active');\r\n        error.textContent = '';\r\n    })\r\n}\r\n\r\nexport const setEventListeners = (formElement) => {\r\n    const inputList = Array.from(formElement.querySelectorAll('.popup__input'));\r\n    toggleButton(formElement);\r\n    inputList.forEach((inputElement) => {\r\n        inputElement.addEventListener('input', () => {\r\n            isValid(formElement, inputElement);\r\n            toggleButton(formElement);\r\n        })\r\n    })\r\n}","import \"../pages/index.css\"\r\nimport { createCard, handleDelete, pressLikeButton} from \"../components/card.js\";\r\nimport { openModal, closeModal, closeModalOverlay } from \"../components/modal.js\";\r\nimport { clearValidation, setEventListeners } from \"./validation.js\";\r\nimport { getInitialCards, getUserInfo, editUserInfo, addNewCard, editAvatar } from \"./api.js\";\r\n\r\n// DOM узлы\r\nconst placesList = document.querySelector('.places__list');\r\nconst popupEditProfile = document.querySelector('.popup_type_edit');\r\nconst popupEditAvatar = document.querySelector('.popup_avatar_edit');\r\nconst formEditAvatar = popupEditAvatar.querySelector('.popup__form');\r\nconst avatarLinkInput = formEditAvatar.querySelector('.popup__input_type_avatar');\r\nconst profileImg = document.querySelector('.profile__image');\r\nconst buttonOpenPopupEditProfile = document.querySelector('.profile__edit-button');\r\nconst popupAddCard = document.querySelector('.popup_type_new-card');\r\nconst buttonOpenPopupAddCard = document.querySelector('.profile__add-button');\r\nconst imagePopup = document.querySelector('.popup_type_image');\r\nconst imagePopupPic = imagePopup.querySelector('.popup__image');\r\nconst imagePopupDesc = imagePopup.querySelector('.popup__caption');\r\nconst newCardForm = popupAddCard.querySelector('.popup__form');\r\nconst placeInput = newCardForm.querySelector('.popup__input_type_card-name');\r\nconst linkInput = newCardForm.querySelector('.popup__input_type_url');\r\nconst formEditProfile = document.querySelector('.popup_type_edit .popup__form');\r\nconst nameInput = formEditProfile.querySelector('.popup__input_type_name');\r\nconst jobInput = formEditProfile.querySelector('.popup__input_type_description');\r\nconst profileTitle = document.querySelector('.profile__title');\r\nconst profileDesc = document.querySelector('.profile__description');\r\nconst buttonClosePopupEditAvatar = popupEditAvatar.querySelector('.popup__close');\r\nconst buttonClosePopupEditProfile = popupEditProfile.querySelector('.popup__close');\r\nconst buttonClosePopupAddCard = popupAddCard.querySelector('.popup__close');\r\nconst buttonCloseImagePopup = imagePopup.querySelector('.popup__close');\r\nconst buttonSubmitPopupEditAvatar = popupEditAvatar.querySelector('.popup__button');\r\nconst buttonSubmitPopupEditProfile = popupEditProfile.querySelector('.popup__button');\r\nconst buttonSubmitPopupAddCard = popupAddCard.querySelector('.popup__button');\r\n\r\n// функция открытия попапа с картинкой\r\nfunction zoomImg(evt, cardElement) {\r\n    imagePopupDesc.textContent = cardElement.querySelector('.card__title').textContent;\r\n    imagePopupPic.src = evt.target.src;\r\n    imagePopupPic.alt = evt.target.alt;\r\n    openModal(imagePopup);\r\n}\r\n\r\n// обработчики открытия и закрытия модальных окон\r\nprofileImg.addEventListener('click', function () {\r\n    formEditAvatar.reset();\r\n    clearValidation(formEditAvatar);\r\n    openModal(popupEditAvatar);\r\n})\r\n\r\nbuttonOpenPopupEditProfile.addEventListener('click', function () {\r\n    nameInput.value = profileTitle.textContent, jobInput.value = profileDesc.textContent;\r\n    openModal(popupEditProfile);\r\n    clearValidation(formEditProfile);\r\n});\r\nbuttonOpenPopupAddCard.addEventListener('click', function() {\r\n    newCardForm.reset();\r\n    clearValidation(newCardForm);\r\n    openModal(popupAddCard);\r\n});\r\n\r\nbuttonClosePopupEditAvatar.addEventListener('click', () => closeModal(popupEditAvatar));\r\nbuttonClosePopupEditProfile.addEventListener('click', () => closeModal(popupEditProfile));\r\nbuttonClosePopupAddCard.addEventListener('click', () => closeModal(popupAddCard));\r\nbuttonCloseImagePopup.addEventListener('click', () => closeModal(imagePopup));\r\n\r\npopupEditAvatar.addEventListener(\"click\", closeModalOverlay);\r\npopupEditProfile.addEventListener(\"click\", closeModalOverlay);\r\npopupAddCard.addEventListener(\"click\", closeModalOverlay);\r\nimagePopup.addEventListener(\"click\", closeModalOverlay);\r\n\r\n// функция редактирования профиля\r\nfunction submitEditProfileForm(evt) {\r\n    evt.preventDefault();\r\n    renderLoading(true, buttonSubmitPopupEditProfile);\r\n    editUserInfo(nameInput.value, jobInput.value).then((result) => {\r\n        renderUserInfo(result.name, result.about, result.avatar)\r\n    })\r\n    .catch((err) => {\r\n        console.log(err);\r\n    })\r\n    .finally(() => {\r\n        renderLoading(false, buttonSubmitPopupEditProfile);\r\n        closeModal(popupEditProfile);\r\n    });\r\n}\r\n\r\nformEditProfile.addEventListener('submit', submitEditProfileForm);\r\n\r\n// функция добавления новой карточки\r\nfunction submitAddCardForm(evt) {\r\n    evt.preventDefault();\r\n    \r\n    const singleCard = {};\r\n    singleCard.name = placeInput.value;\r\n    singleCard.link = linkInput.value;\r\n    singleCard.desc = singleCard.name;\r\n    singleCard.likes = '';\r\n    \r\n    renderLoading(true, buttonSubmitPopupAddCard);\r\n    addNewCard(singleCard.name, singleCard.link).then(res => {\r\n        singleCard.owner = res.owner._id;\r\n        placesList.prepend(createCard(singleCard, handleDelete, pressLikeButton, zoomImg));\r\n    })\r\n    .catch((err) => {\r\n        console.log(err);\r\n    })\r\n    .finally(() => {\r\n        renderLoading(false, buttonSubmitPopupAddCard);\r\n        closeModal(popupAddCard);\r\n        newCardForm.reset();\r\n    });\r\n}\r\n\r\nnewCardForm.addEventListener('submit', submitAddCardForm);\r\n\r\n//функция редактирования аватара\r\nfunction submitEditAvatarForm(evt) {\r\n    evt.preventDefault();\r\n    renderLoading(true, buttonSubmitPopupEditAvatar);\r\n    editAvatar(avatarLinkInput.value).then(res => {\r\n        renderUserInfo(res.name, res.about, res.avatar)\r\n   })\r\n   .catch((err) => {\r\n        console.log(err);\r\n    })\r\n    .finally(() => {\r\n        renderLoading(false, buttonSubmitPopupEditAvatar);\r\n        closeModal(popupEditAvatar);\r\n    });\r\n}\r\n\r\nformEditAvatar.addEventListener('submit', submitEditAvatarForm);\r\n\r\nsetEventListeners(formEditAvatar);\r\nsetEventListeners(formEditProfile);\r\nsetEventListeners(newCardForm);\r\n\r\nfunction renderInitialCards(data, user) { \r\n    data.forEach((item) => { \r\n        placesList.append(createCard(item, handleDelete, pressLikeButton, zoomImg, user));\r\n    })\r\n}\r\n\r\nPromise.all([getUserInfo(), getInitialCards()]).then(([userData, cards]) => {\r\n    renderInitialCards(cards, userData._id);\r\n})\r\n\r\ngetUserInfo().then((result) => {\r\n        renderUserInfo(result.name, result.about, result.avatar)\r\n    })\r\n    .catch((err) => {\r\n        console.log(err);\r\n    });\r\n\r\nfunction renderUserInfo(userName, userDesc, userAvatar) {\r\n    profileTitle.textContent = userName;\r\n    profileDesc.textContent = userDesc;\r\n    profileImg.style.backgroundImage = `url(${userAvatar})`\r\n}\r\n\r\nfunction renderLoading(isLoading, submitButton) {\r\n    if(isLoading) {\r\n        submitButton.textContent = 'Сохранение...'\r\n    } else {\r\n        submitButton.textContent = 'Сохранить'\r\n    }\r\n}\r\n\r\n\r\n"],"names":["authConfig","baseUrl","headers","authorization","getUserInfo","fetch","concat","then","res","ok","json","Promise","reject","status","cardTemplate","document","querySelector","content","createCard","cardData","handleDelete","pressLikeButton","zoomImg","user","cardElement","cloneNode","cardImage","cardLikeButton","likesCounter","cardDeleteButton","src","link","alt","name","textContent","likes","length","owner","_id","classList","add","addEventListener","cardId","method","evt","target","contains","addCardLike","result","catch","err","console","log","deleteCardLike","updateLikesNumber","remove","toggle","openModal","modal","closeModalEsc","closeModal","popup","removeEventListener","key","closeModalOverlay","currentTarget","toggleButton","formElement","buttonElement","Array","from","querySelectorAll","some","inputElement","validity","valid","hasInvalidInput","disabled","clearValidation","forEach","error","setEventListeners","inputList","formInput","patternMismatch","setCustomValidity","formError","id","hideInputError","errorMessage","showInputError","validationMessage","isValid","placesList","popupEditProfile","popupEditAvatar","formEditAvatar","avatarLinkInput","profileImg","buttonOpenPopupEditProfile","popupAddCard","buttonOpenPopupAddCard","imagePopup","imagePopupPic","imagePopupDesc","newCardForm","placeInput","linkInput","formEditProfile","nameInput","jobInput","profileTitle","profileDesc","buttonClosePopupEditAvatar","buttonClosePopupEditProfile","buttonClosePopupAddCard","buttonCloseImagePopup","buttonSubmitPopupEditAvatar","buttonSubmitPopupEditProfile","buttonSubmitPopupAddCard","renderUserInfo","userName","userDesc","userAvatar","style","backgroundImage","renderLoading","isLoading","submitButton","reset","value","preventDefault","body","JSON","stringify","about","avatar","finally","cardName","cardLink","singleCard","desc","prepend","all","_ref","data","_ref2","userData","item","append"],"sourceRoot":""}